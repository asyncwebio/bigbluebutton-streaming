{"mappings":"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","sources":["packages/react/menu/src/index.ts","packages/react/menu/src/Menu.tsx"],"sourcesContent":["export {\n  createMenuScope,\n  //\n  Menu,\n  MenuAnchor,\n  MenuPortal,\n  MenuContent,\n  MenuGroup,\n  MenuLabel,\n  MenuItem,\n  MenuCheckboxItem,\n  MenuRadioGroup,\n  MenuRadioItem,\n  MenuItemIndicator,\n  MenuSeparator,\n  MenuArrow,\n  MenuSub,\n  MenuSubTrigger,\n  MenuSubContent,\n  //\n  Root,\n  Anchor,\n  Portal,\n  Content,\n  Group,\n  Label,\n  Item,\n  CheckboxItem,\n  RadioGroup,\n  RadioItem,\n  ItemIndicator,\n  Separator,\n  Arrow,\n  Sub,\n  SubTrigger,\n  SubContent,\n} from './Menu';\nexport type {\n  MenuProps,\n  MenuAnchorProps,\n  MenuPortalProps,\n  MenuContentProps,\n  MenuGroupProps,\n  MenuLabelProps,\n  MenuItemProps,\n  MenuCheckboxItemProps,\n  MenuRadioGroupProps,\n  MenuRadioItemProps,\n  MenuItemIndicatorProps,\n  MenuSeparatorProps,\n  MenuArrowProps,\n  MenuSubProps,\n  MenuSubTriggerProps,\n  MenuSubContentProps,\n} from './Menu';\n","import * as React from 'react';\nimport { composeEventHandlers } from '@radix-ui/primitive';\nimport { createCollection } from '@radix-ui/react-collection';\nimport { useComposedRefs, composeRefs } from '@radix-ui/react-compose-refs';\nimport { createContextScope } from '@radix-ui/react-context';\nimport { useDirection } from '@radix-ui/react-direction';\nimport { DismissableLayer } from '@radix-ui/react-dismissable-layer';\nimport { useFocusGuards } from '@radix-ui/react-focus-guards';\nimport { FocusScope } from '@radix-ui/react-focus-scope';\nimport { useId } from '@radix-ui/react-id';\nimport * as PopperPrimitive from '@radix-ui/react-popper';\nimport { createPopperScope } from '@radix-ui/react-popper';\nimport { Portal as PortalPrimitive } from '@radix-ui/react-portal';\nimport { Presence } from '@radix-ui/react-presence';\nimport { Primitive, dispatchDiscreteCustomEvent } from '@radix-ui/react-primitive';\nimport * as RovingFocusGroup from '@radix-ui/react-roving-focus';\nimport { createRovingFocusGroupScope } from '@radix-ui/react-roving-focus';\nimport { Slot } from '@radix-ui/react-slot';\nimport { useCallbackRef } from '@radix-ui/react-use-callback-ref';\nimport { hideOthers } from 'aria-hidden';\nimport { RemoveScroll } from 'react-remove-scroll';\n\nimport type * as Radix from '@radix-ui/react-primitive';\nimport type { Scope } from '@radix-ui/react-context';\n\ntype Direction = 'ltr' | 'rtl';\n\nconst SELECTION_KEYS = ['Enter', ' '];\nconst FIRST_KEYS = ['ArrowDown', 'PageUp', 'Home'];\nconst LAST_KEYS = ['ArrowUp', 'PageDown', 'End'];\nconst FIRST_LAST_KEYS = [...FIRST_KEYS, ...LAST_KEYS];\nconst SUB_OPEN_KEYS: Record<Direction, string[]> = {\n  ltr: [...SELECTION_KEYS, 'ArrowRight'],\n  rtl: [...SELECTION_KEYS, 'ArrowLeft'],\n};\nconst SUB_CLOSE_KEYS: Record<Direction, string[]> = {\n  ltr: ['ArrowLeft'],\n  rtl: ['ArrowRight'],\n};\n\n/* -------------------------------------------------------------------------------------------------\n * Menu\n * -----------------------------------------------------------------------------------------------*/\n\nconst MENU_NAME = 'Menu';\n\ntype ItemData = { disabled: boolean; textValue: string };\nconst [Collection, useCollection, createCollectionScope] = createCollection<\n  MenuItemElement,\n  ItemData\n>(MENU_NAME);\n\ntype ScopedProps<P> = P & { __scopeMenu?: Scope };\nconst [createMenuContext, createMenuScope] = createContextScope(MENU_NAME, [\n  createCollectionScope,\n  createPopperScope,\n  createRovingFocusGroupScope,\n]);\nconst usePopperScope = createPopperScope();\nconst useRovingFocusGroupScope = createRovingFocusGroupScope();\n\ntype MenuContextValue = {\n  open: boolean;\n  onOpenChange(open: boolean): void;\n  content: MenuContentElement | null;\n  onContentChange(content: MenuContentElement | null): void;\n};\n\nconst [MenuProvider, useMenuContext] = createMenuContext<MenuContextValue>(MENU_NAME);\n\ntype MenuRootContextValue = {\n  onClose(): void;\n  isUsingKeyboardRef: React.RefObject<boolean>;\n  dir: Direction;\n  modal: boolean;\n};\n\nconst [MenuRootProvider, useMenuRootContext] = createMenuContext<MenuRootContextValue>(MENU_NAME);\n\ninterface MenuProps {\n  children?: React.ReactNode;\n  open?: boolean;\n  onOpenChange?(open: boolean): void;\n  dir?: Direction;\n  modal?: boolean;\n}\n\nconst Menu: React.FC<MenuProps> = (props: ScopedProps<MenuProps>) => {\n  const { __scopeMenu, open = false, children, dir, onOpenChange, modal = true } = props;\n  const popperScope = usePopperScope(__scopeMenu);\n  const [content, setContent] = React.useState<MenuContentElement | null>(null);\n  const isUsingKeyboardRef = React.useRef(false);\n  const handleOpenChange = useCallbackRef(onOpenChange);\n  const direction = useDirection(dir);\n\n  React.useEffect(() => {\n    // Capture phase ensures we set the boolean before any side effects execute\n    // in response to the key or pointer event as they might depend on this value.\n    const handleKeyDown = () => {\n      isUsingKeyboardRef.current = true;\n      document.addEventListener('pointerdown', handlePointer, { capture: true, once: true });\n      document.addEventListener('pointermove', handlePointer, { capture: true, once: true });\n    };\n    const handlePointer = () => (isUsingKeyboardRef.current = false);\n    document.addEventListener('keydown', handleKeyDown, { capture: true });\n    return () => {\n      document.removeEventListener('keydown', handleKeyDown, { capture: true });\n      document.removeEventListener('pointerdown', handlePointer, { capture: true });\n      document.removeEventListener('pointermove', handlePointer, { capture: true });\n    };\n  }, []);\n\n  return (\n    <PopperPrimitive.Root {...popperScope}>\n      <MenuProvider\n        scope={__scopeMenu}\n        open={open}\n        onOpenChange={handleOpenChange}\n        content={content}\n        onContentChange={setContent}\n      >\n        <MenuRootProvider\n          scope={__scopeMenu}\n          onClose={React.useCallback(() => handleOpenChange(false), [handleOpenChange])}\n          isUsingKeyboardRef={isUsingKeyboardRef}\n          dir={direction}\n          modal={modal}\n        >\n          {children}\n        </MenuRootProvider>\n      </MenuProvider>\n    </PopperPrimitive.Root>\n  );\n};\n\nMenu.displayName = MENU_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * MenuAnchor\n * -----------------------------------------------------------------------------------------------*/\n\nconst ANCHOR_NAME = 'MenuAnchor';\n\ntype MenuAnchorElement = React.ElementRef<typeof PopperPrimitive.Anchor>;\ntype PopperAnchorProps = Radix.ComponentPropsWithoutRef<typeof PopperPrimitive.Anchor>;\ninterface MenuAnchorProps extends PopperAnchorProps {}\n\nconst MenuAnchor = React.forwardRef<MenuAnchorElement, MenuAnchorProps>(\n  (props: ScopedProps<MenuAnchorProps>, forwardedRef) => {\n    const { __scopeMenu, ...anchorProps } = props;\n    const popperScope = usePopperScope(__scopeMenu);\n    return <PopperPrimitive.Anchor {...popperScope} {...anchorProps} ref={forwardedRef} />;\n  }\n);\n\nMenuAnchor.displayName = ANCHOR_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * MenuPortal\n * -----------------------------------------------------------------------------------------------*/\n\nconst PORTAL_NAME = 'MenuPortal';\n\ntype PortalContextValue = { forceMount?: true };\nconst [PortalProvider, usePortalContext] = createMenuContext<PortalContextValue>(PORTAL_NAME, {\n  forceMount: undefined,\n});\n\ntype PortalProps = React.ComponentPropsWithoutRef<typeof PortalPrimitive>;\ninterface MenuPortalProps extends Omit<PortalProps, 'asChild'> {\n  children?: React.ReactNode;\n  /**\n   * Used to force mounting when more control is needed. Useful when\n   * controlling animation with React animation libraries.\n   */\n  forceMount?: true;\n}\n\nconst MenuPortal: React.FC<MenuPortalProps> = (props: ScopedProps<MenuPortalProps>) => {\n  const { __scopeMenu, forceMount, children, container } = props;\n  const context = useMenuContext(PORTAL_NAME, __scopeMenu);\n  return (\n    <PortalProvider scope={__scopeMenu} forceMount={forceMount}>\n      <Presence present={forceMount || context.open}>\n        <PortalPrimitive asChild container={container}>\n          {children}\n        </PortalPrimitive>\n      </Presence>\n    </PortalProvider>\n  );\n};\n\nMenuPortal.displayName = PORTAL_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * MenuContent\n * -----------------------------------------------------------------------------------------------*/\n\nconst CONTENT_NAME = 'MenuContent';\n\ntype MenuContentContextValue = {\n  onItemEnter(event: React.PointerEvent): void;\n  onItemLeave(event: React.PointerEvent): void;\n  onTriggerLeave(event: React.PointerEvent): void;\n  searchRef: React.RefObject<string>;\n  pointerGraceTimerRef: React.MutableRefObject<number>;\n  onPointerGraceIntentChange(intent: GraceIntent | null): void;\n};\nconst [MenuContentProvider, useMenuContentContext] =\n  createMenuContext<MenuContentContextValue>(CONTENT_NAME);\n\ntype MenuContentElement = MenuRootContentTypeElement;\n/**\n * We purposefully don't union MenuRootContent and MenuSubContent props here because\n * they have conflicting prop types. We agreed that we would allow MenuSubContent to\n * accept props that it would just ignore.\n */\ninterface MenuContentProps extends MenuRootContentTypeProps {\n  /**\n   * Used to force mounting when more control is needed. Useful when\n   * controlling animation with React animation libraries.\n   */\n  forceMount?: true;\n}\n\nconst MenuContent = React.forwardRef<MenuContentElement, MenuContentProps>(\n  (props: ScopedProps<MenuContentProps>, forwardedRef) => {\n    const portalContext = usePortalContext(CONTENT_NAME, props.__scopeMenu);\n    const { forceMount = portalContext.forceMount, ...contentProps } = props;\n    const context = useMenuContext(CONTENT_NAME, props.__scopeMenu);\n    const rootContext = useMenuRootContext(CONTENT_NAME, props.__scopeMenu);\n\n    return (\n      <Collection.Provider scope={props.__scopeMenu}>\n        <Presence present={forceMount || context.open}>\n          <Collection.Slot scope={props.__scopeMenu}>\n            {rootContext.modal ? (\n              <MenuRootContentModal {...contentProps} ref={forwardedRef} />\n            ) : (\n              <MenuRootContentNonModal {...contentProps} ref={forwardedRef} />\n            )}\n          </Collection.Slot>\n        </Presence>\n      </Collection.Provider>\n    );\n  }\n);\n\n/* ---------------------------------------------------------------------------------------------- */\n\ntype MenuRootContentTypeElement = MenuContentImplElement;\ninterface MenuRootContentTypeProps\n  extends Omit<MenuContentImplProps, keyof MenuContentImplPrivateProps> {}\n\nconst MenuRootContentModal = React.forwardRef<MenuRootContentTypeElement, MenuRootContentTypeProps>(\n  (props: ScopedProps<MenuRootContentTypeProps>, forwardedRef) => {\n    const context = useMenuContext(CONTENT_NAME, props.__scopeMenu);\n    const ref = React.useRef<MenuRootContentTypeElement>(null);\n    const composedRefs = useComposedRefs(forwardedRef, ref);\n\n    // Hide everything from ARIA except the `MenuContent`\n    React.useEffect(() => {\n      const content = ref.current;\n      if (content) return hideOthers(content);\n    }, []);\n\n    return (\n      <MenuContentImpl\n        {...props}\n        ref={composedRefs}\n        // we make sure we're not trapping once it's been closed\n        // (closed !== unmounted when animating out)\n        trapFocus={context.open}\n        // make sure to only disable pointer events when open\n        // this avoids blocking interactions while animating out\n        disableOutsidePointerEvents={context.open}\n        disableOutsideScroll\n        // When focus is trapped, a `focusout` event may still happen.\n        // We make sure we don't trigger our `onDismiss` in such case.\n        onFocusOutside={composeEventHandlers(\n          props.onFocusOutside,\n          (event) => event.preventDefault(),\n          { checkForDefaultPrevented: false }\n        )}\n        onDismiss={() => context.onOpenChange(false)}\n      />\n    );\n  }\n);\n\nconst MenuRootContentNonModal = React.forwardRef<\n  MenuRootContentTypeElement,\n  MenuRootContentTypeProps\n>((props: ScopedProps<MenuRootContentTypeProps>, forwardedRef) => {\n  const context = useMenuContext(CONTENT_NAME, props.__scopeMenu);\n  return (\n    <MenuContentImpl\n      {...props}\n      ref={forwardedRef}\n      trapFocus={false}\n      disableOutsidePointerEvents={false}\n      disableOutsideScroll={false}\n      onDismiss={() => context.onOpenChange(false)}\n    />\n  );\n});\n\n/* ---------------------------------------------------------------------------------------------- */\n\ntype MenuContentImplElement = React.ElementRef<typeof PopperPrimitive.Content>;\ntype FocusScopeProps = Radix.ComponentPropsWithoutRef<typeof FocusScope>;\ntype DismissableLayerProps = Radix.ComponentPropsWithoutRef<typeof DismissableLayer>;\ntype RovingFocusGroupProps = Radix.ComponentPropsWithoutRef<typeof RovingFocusGroup.Root>;\ntype PopperContentProps = Radix.ComponentPropsWithoutRef<typeof PopperPrimitive.Content>;\ntype MenuContentImplPrivateProps = {\n  onOpenAutoFocus?: FocusScopeProps['onMountAutoFocus'];\n  onDismiss?: DismissableLayerProps['onDismiss'];\n  disableOutsidePointerEvents?: DismissableLayerProps['disableOutsidePointerEvents'];\n\n  /**\n   * Whether scrolling outside the `MenuContent` should be prevented\n   * (default: `false`)\n   */\n  disableOutsideScroll?: boolean;\n\n  /**\n   * Whether focus should be trapped within the `MenuContent`\n   * (default: false)\n   */\n  trapFocus?: FocusScopeProps['trapped'];\n};\ninterface MenuContentImplProps\n  extends MenuContentImplPrivateProps,\n    Omit<PopperContentProps, 'dir'> {\n  /**\n   * Event handler called when auto-focusing on close.\n   * Can be prevented.\n   */\n  onCloseAutoFocus?: FocusScopeProps['onUnmountAutoFocus'];\n\n  /**\n   * Whether keyboard navigation should loop around\n   * @defaultValue false\n   */\n  loop?: RovingFocusGroupProps['loop'];\n\n  onEscapeKeyDown?: DismissableLayerProps['onEscapeKeyDown'];\n  onPointerDownOutside?: DismissableLayerProps['onPointerDownOutside'];\n  onFocusOutside?: DismissableLayerProps['onFocusOutside'];\n  onInteractOutside?: DismissableLayerProps['onInteractOutside'];\n}\n\nconst MenuContentImpl = React.forwardRef<MenuContentImplElement, MenuContentImplProps>(\n  (props: ScopedProps<MenuContentImplProps>, forwardedRef) => {\n    const {\n      __scopeMenu,\n      loop = false,\n      trapFocus,\n      onOpenAutoFocus,\n      onCloseAutoFocus,\n      disableOutsidePointerEvents,\n      onEscapeKeyDown,\n      onPointerDownOutside,\n      onFocusOutside,\n      onInteractOutside,\n      onDismiss,\n      disableOutsideScroll,\n      ...contentProps\n    } = props;\n    const context = useMenuContext(CONTENT_NAME, __scopeMenu);\n    const rootContext = useMenuRootContext(CONTENT_NAME, __scopeMenu);\n    const popperScope = usePopperScope(__scopeMenu);\n    const rovingFocusGroupScope = useRovingFocusGroupScope(__scopeMenu);\n    const getItems = useCollection(__scopeMenu);\n    const [currentItemId, setCurrentItemId] = React.useState<string | null>(null);\n    const contentRef = React.useRef<HTMLDivElement>(null);\n    const composedRefs = useComposedRefs(forwardedRef, contentRef, context.onContentChange);\n    const timerRef = React.useRef(0);\n    const searchRef = React.useRef('');\n    const pointerGraceTimerRef = React.useRef(0);\n    const pointerGraceIntentRef = React.useRef<GraceIntent | null>(null);\n    const pointerDirRef = React.useRef<Side>('right');\n    const lastPointerXRef = React.useRef(0);\n\n    const ScrollLockWrapper = disableOutsideScroll ? RemoveScroll : React.Fragment;\n    const scrollLockWrapperProps = disableOutsideScroll\n      ? { as: Slot, allowPinchZoom: true }\n      : undefined;\n\n    const handleTypeaheadSearch = (key: string) => {\n      const search = searchRef.current + key;\n      const items = getItems().filter((item) => !item.disabled);\n      const currentItem = document.activeElement;\n      const currentMatch = items.find((item) => item.ref.current === currentItem)?.textValue;\n      const values = items.map((item) => item.textValue);\n      const nextMatch = getNextMatch(values, search, currentMatch);\n      const newItem = items.find((item) => item.textValue === nextMatch)?.ref.current;\n\n      // Reset `searchRef` 1 second after it was last updated\n      (function updateSearch(value: string) {\n        searchRef.current = value;\n        window.clearTimeout(timerRef.current);\n        if (value !== '') timerRef.current = window.setTimeout(() => updateSearch(''), 1000);\n      })(search);\n\n      if (newItem) {\n        /**\n         * Imperative focus during keydown is risky so we prevent React's batching updates\n         * to avoid potential bugs. See: https://github.com/facebook/react/issues/20332\n         */\n        setTimeout(() => (newItem as HTMLElement).focus());\n      }\n    };\n\n    React.useEffect(() => {\n      return () => window.clearTimeout(timerRef.current);\n    }, []);\n\n    // Make sure the whole tree has focus guards as our `MenuContent` may be\n    // the last element in the DOM (beacuse of the `Portal`)\n    useFocusGuards();\n\n    const isPointerMovingToSubmenu = React.useCallback((event: React.PointerEvent) => {\n      const isMovingTowards = pointerDirRef.current === pointerGraceIntentRef.current?.side;\n      return isMovingTowards && isPointerInGraceArea(event, pointerGraceIntentRef.current?.area);\n    }, []);\n\n    return (\n      <MenuContentProvider\n        scope={__scopeMenu}\n        searchRef={searchRef}\n        onItemEnter={React.useCallback(\n          (event) => {\n            if (isPointerMovingToSubmenu(event)) event.preventDefault();\n          },\n          [isPointerMovingToSubmenu]\n        )}\n        onItemLeave={React.useCallback(\n          (event) => {\n            if (isPointerMovingToSubmenu(event)) return;\n            contentRef.current?.focus();\n            setCurrentItemId(null);\n          },\n          [isPointerMovingToSubmenu]\n        )}\n        onTriggerLeave={React.useCallback(\n          (event) => {\n            if (isPointerMovingToSubmenu(event)) event.preventDefault();\n          },\n          [isPointerMovingToSubmenu]\n        )}\n        pointerGraceTimerRef={pointerGraceTimerRef}\n        onPointerGraceIntentChange={React.useCallback((intent) => {\n          pointerGraceIntentRef.current = intent;\n        }, [])}\n      >\n        <ScrollLockWrapper {...scrollLockWrapperProps}>\n          <FocusScope\n            asChild\n            trapped={trapFocus}\n            onMountAutoFocus={composeEventHandlers(onOpenAutoFocus, (event) => {\n              // when opening, explicitly focus the content area only and leave\n              // `onEntryFocus` in  control of focusing first item\n              event.preventDefault();\n              contentRef.current?.focus();\n            })}\n            onUnmountAutoFocus={onCloseAutoFocus}\n          >\n            <DismissableLayer\n              asChild\n              disableOutsidePointerEvents={disableOutsidePointerEvents}\n              onEscapeKeyDown={onEscapeKeyDown}\n              onPointerDownOutside={onPointerDownOutside}\n              onFocusOutside={onFocusOutside}\n              onInteractOutside={onInteractOutside}\n              onDismiss={onDismiss}\n            >\n              <RovingFocusGroup.Root\n                asChild\n                {...rovingFocusGroupScope}\n                dir={rootContext.dir}\n                orientation=\"vertical\"\n                loop={loop}\n                currentTabStopId={currentItemId}\n                onCurrentTabStopIdChange={setCurrentItemId}\n                onEntryFocus={(event) => {\n                  // only focus first item when using keyboard\n                  if (!rootContext.isUsingKeyboardRef.current) event.preventDefault();\n                }}\n              >\n                <PopperPrimitive.Content\n                  role=\"menu\"\n                  aria-orientation=\"vertical\"\n                  data-state={getOpenState(context.open)}\n                  dir={rootContext.dir}\n                  {...popperScope}\n                  {...contentProps}\n                  ref={composedRefs}\n                  style={{ outline: 'none', ...contentProps.style }}\n                  onKeyDown={composeEventHandlers(contentProps.onKeyDown, (event) => {\n                    // submenu key events bubble through portals. We only care about keys in this menu.\n                    const target = event.target as HTMLElement;\n                    const isKeyDownInside = target.closest('[role=\"menu\"]') === event.currentTarget;\n                    const isModifierKey = event.ctrlKey || event.altKey || event.metaKey;\n                    const isCharacterKey = event.key.length === 1;\n                    if (isKeyDownInside) {\n                      // menus should not be navigated using tab key so we prevent it\n                      if (event.key === 'Tab') event.preventDefault();\n                      if (!isModifierKey && isCharacterKey) handleTypeaheadSearch(event.key);\n                    }\n                    // focus first/last item based on key pressed\n                    const content = contentRef.current;\n                    if (event.target !== content) return;\n                    if (!FIRST_LAST_KEYS.includes(event.key)) return;\n                    event.preventDefault();\n                    const items = getItems().filter((item) => !item.disabled);\n                    const candidateNodes = items.map((item) => item.ref.current!);\n                    if (LAST_KEYS.includes(event.key)) candidateNodes.reverse();\n                    focusFirst(candidateNodes);\n                  })}\n                  onBlur={composeEventHandlers(props.onBlur, (event) => {\n                    // clear search buffer when leaving the menu\n                    if (!event.currentTarget.contains(event.target)) {\n                      window.clearTimeout(timerRef.current);\n                      searchRef.current = '';\n                    }\n                  })}\n                  onPointerMove={composeEventHandlers(\n                    props.onPointerMove,\n                    whenMouse((event) => {\n                      const target = event.target as HTMLElement;\n                      const pointerXHasChanged = lastPointerXRef.current !== event.clientX;\n\n                      // We don't use `event.movementX` for this check because Safari will\n                      // always return `0` on a pointer event.\n                      if (event.currentTarget.contains(target) && pointerXHasChanged) {\n                        const newDir = event.clientX > lastPointerXRef.current ? 'right' : 'left';\n                        pointerDirRef.current = newDir;\n                        lastPointerXRef.current = event.clientX;\n                      }\n                    })\n                  )}\n                />\n              </RovingFocusGroup.Root>\n            </DismissableLayer>\n          </FocusScope>\n        </ScrollLockWrapper>\n      </MenuContentProvider>\n    );\n  }\n);\n\nMenuContent.displayName = CONTENT_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * MenuGroup\n * -----------------------------------------------------------------------------------------------*/\n\nconst GROUP_NAME = 'MenuGroup';\n\ntype MenuGroupElement = React.ElementRef<typeof Primitive.div>;\ntype PrimitiveDivProps = Radix.ComponentPropsWithoutRef<typeof Primitive.div>;\ninterface MenuGroupProps extends PrimitiveDivProps {}\n\nconst MenuGroup = React.forwardRef<MenuGroupElement, MenuGroupProps>(\n  (props: ScopedProps<MenuGroupProps>, forwardedRef) => {\n    const { __scopeMenu, ...groupProps } = props;\n    return <Primitive.div role=\"group\" {...groupProps} ref={forwardedRef} />;\n  }\n);\n\nMenuGroup.displayName = GROUP_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * MenuLabel\n * -----------------------------------------------------------------------------------------------*/\n\nconst LABEL_NAME = 'MenuLabel';\n\ntype MenuLabelElement = React.ElementRef<typeof Primitive.div>;\ninterface MenuLabelProps extends PrimitiveDivProps {}\n\nconst MenuLabel = React.forwardRef<MenuLabelElement, MenuLabelProps>(\n  (props: ScopedProps<MenuLabelProps>, forwardedRef) => {\n    const { __scopeMenu, ...labelProps } = props;\n    return <Primitive.div {...labelProps} ref={forwardedRef} />;\n  }\n);\n\nMenuLabel.displayName = LABEL_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * MenuItem\n * -----------------------------------------------------------------------------------------------*/\n\nconst ITEM_NAME = 'MenuItem';\nconst ITEM_SELECT = 'menu.itemSelect';\n\ntype MenuItemElement = MenuItemImplElement;\ninterface MenuItemProps extends Omit<MenuItemImplProps, 'onSelect'> {\n  onSelect?: (event: Event) => void;\n}\n\nconst MenuItem = React.forwardRef<MenuItemElement, MenuItemProps>(\n  (props: ScopedProps<MenuItemProps>, forwardedRef) => {\n    const { disabled = false, onSelect, ...itemProps } = props;\n    const ref = React.useRef<HTMLDivElement>(null);\n    const rootContext = useMenuRootContext(ITEM_NAME, props.__scopeMenu);\n    const contentContext = useMenuContentContext(ITEM_NAME, props.__scopeMenu);\n    const composedRefs = useComposedRefs(forwardedRef, ref);\n    const isPointerDownRef = React.useRef(false);\n\n    const handleSelect = () => {\n      const menuItem = ref.current;\n      if (!disabled && menuItem) {\n        const itemSelectEvent = new CustomEvent(ITEM_SELECT, { bubbles: true, cancelable: true });\n        menuItem.addEventListener(ITEM_SELECT, (event) => onSelect?.(event), { once: true });\n        dispatchDiscreteCustomEvent(menuItem, itemSelectEvent);\n        if (itemSelectEvent.defaultPrevented) {\n          isPointerDownRef.current = false;\n        } else {\n          rootContext.onClose();\n        }\n      }\n    };\n\n    return (\n      <MenuItemImpl\n        {...itemProps}\n        ref={composedRefs}\n        disabled={disabled}\n        onClick={composeEventHandlers(props.onClick, handleSelect)}\n        onPointerDown={(event) => {\n          props.onPointerDown?.(event);\n          isPointerDownRef.current = true;\n        }}\n        onPointerUp={composeEventHandlers(props.onPointerUp, (event) => {\n          // Pointer down can move to a different menu item which should activate it on pointer up.\n          // We dispatch a click for selection to allow composition with click based triggers and to\n          // prevent Firefox from getting stuck in text selection mode when the menu closes.\n          if (!isPointerDownRef.current) event.currentTarget?.click();\n        })}\n        onKeyDown={composeEventHandlers(props.onKeyDown, (event) => {\n          const isTypingAhead = contentContext.searchRef.current !== '';\n          if (disabled || (isTypingAhead && event.key === ' ')) return;\n          if (SELECTION_KEYS.includes(event.key)) {\n            event.currentTarget.click();\n            /**\n             * We prevent default browser behaviour for selection keys as they should trigger\n             * a selection only:\n             * - prevents space from scrolling the page.\n             * - if keydown causes focus to move, prevents keydown from firing on the new target.\n             */\n            event.preventDefault();\n          }\n        })}\n      />\n    );\n  }\n);\n\nMenuItem.displayName = ITEM_NAME;\n\n/* ---------------------------------------------------------------------------------------------- */\n\ntype MenuItemImplElement = React.ElementRef<typeof Primitive.div>;\ninterface MenuItemImplProps extends PrimitiveDivProps {\n  disabled?: boolean;\n  textValue?: string;\n}\n\nconst MenuItemImpl = React.forwardRef<MenuItemImplElement, MenuItemImplProps>(\n  (props: ScopedProps<MenuItemImplProps>, forwardedRef) => {\n    const { __scopeMenu, disabled = false, textValue, ...itemProps } = props;\n    const contentContext = useMenuContentContext(ITEM_NAME, __scopeMenu);\n    const rovingFocusGroupScope = useRovingFocusGroupScope(__scopeMenu);\n    const ref = React.useRef<HTMLDivElement>(null);\n    const composedRefs = useComposedRefs(forwardedRef, ref);\n    const [isFocused, setIsFocused] = React.useState(false);\n\n    // get the item's `.textContent` as default strategy for typeahead `textValue`\n    const [textContent, setTextContent] = React.useState('');\n    React.useEffect(() => {\n      const menuItem = ref.current;\n      if (menuItem) {\n        setTextContent((menuItem.textContent ?? '').trim());\n      }\n    }, [itemProps.children]);\n\n    return (\n      <Collection.ItemSlot\n        scope={__scopeMenu}\n        disabled={disabled}\n        textValue={textValue ?? textContent}\n      >\n        <RovingFocusGroup.Item asChild {...rovingFocusGroupScope} focusable={!disabled}>\n          <Primitive.div\n            role=\"menuitem\"\n            data-highlighted={isFocused ? '' : undefined}\n            aria-disabled={disabled || undefined}\n            data-disabled={disabled ? '' : undefined}\n            {...itemProps}\n            ref={composedRefs}\n            /**\n             * We focus items on `pointerMove` to achieve the following:\n             *\n             * - Mouse over an item (it focuses)\n             * - Leave mouse where it is and use keyboard to focus a different item\n             * - Wiggle mouse without it leaving previously focused item\n             * - Previously focused item should re-focus\n             *\n             * If we used `mouseOver`/`mouseEnter` it would not re-focus when the mouse\n             * wiggles. This is to match native menu implementation.\n             */\n            onPointerMove={composeEventHandlers(\n              props.onPointerMove,\n              whenMouse((event) => {\n                if (disabled) {\n                  contentContext.onItemLeave(event);\n                } else {\n                  contentContext.onItemEnter(event);\n                  if (!event.defaultPrevented) {\n                    const item = event.currentTarget;\n                    item.focus();\n                  }\n                }\n              })\n            )}\n            onPointerLeave={composeEventHandlers(\n              props.onPointerLeave,\n              whenMouse((event) => contentContext.onItemLeave(event))\n            )}\n            onFocus={composeEventHandlers(props.onFocus, () => setIsFocused(true))}\n            onBlur={composeEventHandlers(props.onBlur, () => setIsFocused(false))}\n          />\n        </RovingFocusGroup.Item>\n      </Collection.ItemSlot>\n    );\n  }\n);\n\n/* -------------------------------------------------------------------------------------------------\n * MenuCheckboxItem\n * -----------------------------------------------------------------------------------------------*/\n\nconst CHECKBOX_ITEM_NAME = 'MenuCheckboxItem';\n\ntype MenuCheckboxItemElement = MenuItemElement;\ninterface MenuCheckboxItemProps extends MenuItemProps {\n  checked?: boolean;\n  onCheckedChange?: (checked: boolean) => void;\n}\n\nconst MenuCheckboxItem = React.forwardRef<MenuCheckboxItemElement, MenuCheckboxItemProps>(\n  (props: ScopedProps<MenuCheckboxItemProps>, forwardedRef) => {\n    const { checked = false, onCheckedChange, ...checkboxItemProps } = props;\n    return (\n      <ItemIndicatorProvider scope={props.__scopeMenu} checked={checked}>\n        <MenuItem\n          role=\"menuitemcheckbox\"\n          aria-checked={checked}\n          {...checkboxItemProps}\n          ref={forwardedRef}\n          data-state={getCheckedState(checked)}\n          onSelect={composeEventHandlers(\n            checkboxItemProps.onSelect,\n            () => onCheckedChange?.(!checked),\n            { checkForDefaultPrevented: false }\n          )}\n        />\n      </ItemIndicatorProvider>\n    );\n  }\n);\n\nMenuCheckboxItem.displayName = CHECKBOX_ITEM_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * MenuRadioGroup\n * -----------------------------------------------------------------------------------------------*/\n\nconst RADIO_GROUP_NAME = 'MenuRadioGroup';\n\nconst [RadioGroupProvider, useRadioGroupContext] = createMenuContext<MenuRadioGroupProps>(\n  RADIO_GROUP_NAME,\n  { value: undefined, onValueChange: () => {} }\n);\n\ntype MenuRadioGroupElement = React.ElementRef<typeof MenuGroup>;\ninterface MenuRadioGroupProps extends MenuGroupProps {\n  value?: string;\n  onValueChange?: (value: string) => void;\n}\n\nconst MenuRadioGroup = React.forwardRef<MenuRadioGroupElement, MenuRadioGroupProps>(\n  (props: ScopedProps<MenuRadioGroupProps>, forwardedRef) => {\n    const { value, onValueChange, ...groupProps } = props;\n    const handleValueChange = useCallbackRef(onValueChange);\n    return (\n      <RadioGroupProvider scope={props.__scopeMenu} value={value} onValueChange={handleValueChange}>\n        <MenuGroup {...groupProps} ref={forwardedRef} />\n      </RadioGroupProvider>\n    );\n  }\n);\n\nMenuRadioGroup.displayName = RADIO_GROUP_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * MenuRadioItem\n * -----------------------------------------------------------------------------------------------*/\n\nconst RADIO_ITEM_NAME = 'MenuRadioItem';\n\ntype MenuRadioItemElement = React.ElementRef<typeof MenuItem>;\ninterface MenuRadioItemProps extends MenuItemProps {\n  value: string;\n}\n\nconst MenuRadioItem = React.forwardRef<MenuRadioItemElement, MenuRadioItemProps>(\n  (props: ScopedProps<MenuRadioItemProps>, forwardedRef) => {\n    const { value, ...radioItemProps } = props;\n    const context = useRadioGroupContext(RADIO_ITEM_NAME, props.__scopeMenu);\n    const checked = value === context.value;\n    return (\n      <ItemIndicatorProvider scope={props.__scopeMenu} checked={checked}>\n        <MenuItem\n          role=\"menuitemradio\"\n          aria-checked={checked}\n          {...radioItemProps}\n          ref={forwardedRef}\n          data-state={getCheckedState(checked)}\n          onSelect={composeEventHandlers(\n            radioItemProps.onSelect,\n            () => context.onValueChange?.(value),\n            { checkForDefaultPrevented: false }\n          )}\n        />\n      </ItemIndicatorProvider>\n    );\n  }\n);\n\nMenuRadioItem.displayName = RADIO_ITEM_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * MenuItemIndicator\n * -----------------------------------------------------------------------------------------------*/\n\nconst ITEM_INDICATOR_NAME = 'MenuItemIndicator';\n\nconst [ItemIndicatorProvider, useItemIndicatorContext] = createMenuContext(ITEM_INDICATOR_NAME, {\n  checked: false,\n});\n\ntype MenuItemIndicatorElement = React.ElementRef<typeof Primitive.span>;\ntype PrimitiveSpanProps = Radix.ComponentPropsWithoutRef<typeof Primitive.span>;\ninterface MenuItemIndicatorProps extends PrimitiveSpanProps {\n  /**\n   * Used to force mounting when more control is needed. Useful when\n   * controlling animation with React animation libraries.\n   */\n  forceMount?: true;\n}\n\nconst MenuItemIndicator = React.forwardRef<MenuItemIndicatorElement, MenuItemIndicatorProps>(\n  (props: ScopedProps<MenuItemIndicatorProps>, forwardedRef) => {\n    const { __scopeMenu, forceMount, ...itemIndicatorProps } = props;\n    const indicatorContext = useItemIndicatorContext(ITEM_INDICATOR_NAME, __scopeMenu);\n    return (\n      <Presence present={forceMount || indicatorContext.checked}>\n        <Primitive.span\n          {...itemIndicatorProps}\n          ref={forwardedRef}\n          data-state={getCheckedState(indicatorContext.checked)}\n        />\n      </Presence>\n    );\n  }\n);\n\nMenuItemIndicator.displayName = ITEM_INDICATOR_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * MenuSeparator\n * -----------------------------------------------------------------------------------------------*/\n\nconst SEPARATOR_NAME = 'MenuSeparator';\n\ntype MenuSeparatorElement = React.ElementRef<typeof Primitive.div>;\ninterface MenuSeparatorProps extends PrimitiveDivProps {}\n\nconst MenuSeparator = React.forwardRef<MenuSeparatorElement, MenuSeparatorProps>(\n  (props: ScopedProps<MenuSeparatorProps>, forwardedRef) => {\n    const { __scopeMenu, ...separatorProps } = props;\n    return (\n      <Primitive.div\n        role=\"separator\"\n        aria-orientation=\"horizontal\"\n        {...separatorProps}\n        ref={forwardedRef}\n      />\n    );\n  }\n);\n\nMenuSeparator.displayName = SEPARATOR_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * MenuArrow\n * -----------------------------------------------------------------------------------------------*/\n\nconst ARROW_NAME = 'MenuArrow';\n\ntype MenuArrowElement = React.ElementRef<typeof PopperPrimitive.Arrow>;\ntype PopperArrowProps = Radix.ComponentPropsWithoutRef<typeof PopperPrimitive.Arrow>;\ninterface MenuArrowProps extends PopperArrowProps {}\n\nconst MenuArrow = React.forwardRef<MenuArrowElement, MenuArrowProps>(\n  (props: ScopedProps<MenuArrowProps>, forwardedRef) => {\n    const { __scopeMenu, ...arrowProps } = props;\n    const popperScope = usePopperScope(__scopeMenu);\n    return <PopperPrimitive.Arrow {...popperScope} {...arrowProps} ref={forwardedRef} />;\n  }\n);\n\nMenuArrow.displayName = ARROW_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * MenuSub\n * -----------------------------------------------------------------------------------------------*/\n\nconst SUB_NAME = 'MenuSub';\n\ntype MenuSubContextValue = {\n  contentId: string;\n  triggerId: string;\n  trigger: MenuSubTriggerElement | null;\n  onTriggerChange(trigger: MenuSubTriggerElement | null): void;\n};\n\nconst [MenuSubProvider, useMenuSubContext] = createMenuContext<MenuSubContextValue>(SUB_NAME);\n\ninterface MenuSubProps {\n  children?: React.ReactNode;\n  open?: boolean;\n  onOpenChange?(open: boolean): void;\n}\n\nconst MenuSub: React.FC<MenuSubProps> = (props: ScopedProps<MenuSubProps>) => {\n  const { __scopeMenu, children, open = false, onOpenChange } = props;\n  const parentMenuContext = useMenuContext(SUB_NAME, __scopeMenu);\n  const popperScope = usePopperScope(__scopeMenu);\n  const [trigger, setTrigger] = React.useState<MenuSubTriggerElement | null>(null);\n  const [content, setContent] = React.useState<MenuContentElement | null>(null);\n  const handleOpenChange = useCallbackRef(onOpenChange);\n\n  // Prevent the parent menu from reopening with open submenus.\n  React.useEffect(() => {\n    if (parentMenuContext.open === false) handleOpenChange(false);\n    return () => handleOpenChange(false);\n  }, [parentMenuContext.open, handleOpenChange]);\n\n  return (\n    <PopperPrimitive.Root {...popperScope}>\n      <MenuProvider\n        scope={__scopeMenu}\n        open={open}\n        onOpenChange={handleOpenChange}\n        content={content}\n        onContentChange={setContent}\n      >\n        <MenuSubProvider\n          scope={__scopeMenu}\n          contentId={useId()}\n          triggerId={useId()}\n          trigger={trigger}\n          onTriggerChange={setTrigger}\n        >\n          {children}\n        </MenuSubProvider>\n      </MenuProvider>\n    </PopperPrimitive.Root>\n  );\n};\n\nMenuSub.displayName = SUB_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * MenuSubTrigger\n * -----------------------------------------------------------------------------------------------*/\n\nconst SUB_TRIGGER_NAME = 'MenuSubTrigger';\n\ntype MenuSubTriggerElement = MenuItemImplElement;\ninterface MenuSubTriggerProps extends MenuItemImplProps {}\n\nconst MenuSubTrigger = React.forwardRef<MenuSubTriggerElement, MenuSubTriggerProps>(\n  (props: ScopedProps<MenuSubTriggerProps>, forwardedRef) => {\n    const context = useMenuContext(SUB_TRIGGER_NAME, props.__scopeMenu);\n    const rootContext = useMenuRootContext(SUB_TRIGGER_NAME, props.__scopeMenu);\n    const subContext = useMenuSubContext(SUB_TRIGGER_NAME, props.__scopeMenu);\n    const contentContext = useMenuContentContext(SUB_TRIGGER_NAME, props.__scopeMenu);\n    const openTimerRef = React.useRef<number | null>(null);\n    const { pointerGraceTimerRef, onPointerGraceIntentChange } = contentContext;\n    const scope = { __scopeMenu: props.__scopeMenu };\n\n    const clearOpenTimer = React.useCallback(() => {\n      if (openTimerRef.current) window.clearTimeout(openTimerRef.current);\n      openTimerRef.current = null;\n    }, []);\n\n    React.useEffect(() => clearOpenTimer, [clearOpenTimer]);\n\n    React.useEffect(() => {\n      const pointerGraceTimer = pointerGraceTimerRef.current;\n      return () => {\n        window.clearTimeout(pointerGraceTimer);\n        onPointerGraceIntentChange(null);\n      };\n    }, [pointerGraceTimerRef, onPointerGraceIntentChange]);\n\n    return (\n      <MenuAnchor asChild {...scope}>\n        <MenuItemImpl\n          id={subContext.triggerId}\n          aria-haspopup=\"menu\"\n          aria-expanded={context.open}\n          aria-controls={subContext.contentId}\n          data-state={getOpenState(context.open)}\n          {...props}\n          ref={composeRefs(forwardedRef, subContext.onTriggerChange)}\n          // This is redundant for mouse users but we cannot determine pointer type from\n          // click event and we cannot use pointerup event (see git history for reasons why)\n          onClick={(event) => {\n            props.onClick?.(event);\n            if (props.disabled || event.defaultPrevented) return;\n            /**\n             * We manually focus because iOS Safari doesn't always focus on click (e.g. buttons)\n             * and we rely heavily on `onFocusOutside` for submenus to close when switching\n             * between separate submenus.\n             */\n            event.currentTarget.focus();\n            if (!context.open) context.onOpenChange(true);\n          }}\n          onPointerMove={composeEventHandlers(\n            props.onPointerMove,\n            whenMouse((event) => {\n              contentContext.onItemEnter(event);\n              if (event.defaultPrevented) return;\n              if (!props.disabled && !context.open && !openTimerRef.current) {\n                contentContext.onPointerGraceIntentChange(null);\n                openTimerRef.current = window.setTimeout(() => {\n                  context.onOpenChange(true);\n                  clearOpenTimer();\n                }, 100);\n              }\n            })\n          )}\n          onPointerLeave={composeEventHandlers(\n            props.onPointerLeave,\n            whenMouse((event) => {\n              clearOpenTimer();\n\n              const contentRect = context.content?.getBoundingClientRect();\n              if (contentRect) {\n                // TODO: make sure to update this when we change positioning logic\n                const side = context.content?.dataset.side as Side;\n                const rightSide = side === 'right';\n                const bleed = rightSide ? -5 : +5;\n                const contentNearEdge = contentRect[rightSide ? 'left' : 'right'];\n                const contentFarEdge = contentRect[rightSide ? 'right' : 'left'];\n\n                contentContext.onPointerGraceIntentChange({\n                  area: [\n                    // Apply a bleed on clientX to ensure that our exit point is\n                    // consistently within polygon bounds\n                    { x: event.clientX + bleed, y: event.clientY },\n                    { x: contentNearEdge, y: contentRect.top },\n                    { x: contentFarEdge, y: contentRect.top },\n                    { x: contentFarEdge, y: contentRect.bottom },\n                    { x: contentNearEdge, y: contentRect.bottom },\n                  ],\n                  side,\n                });\n\n                window.clearTimeout(pointerGraceTimerRef.current);\n                pointerGraceTimerRef.current = window.setTimeout(\n                  () => contentContext.onPointerGraceIntentChange(null),\n                  300\n                );\n              } else {\n                contentContext.onTriggerLeave(event);\n                if (event.defaultPrevented) return;\n\n                // There's 100ms where the user may leave an item before the submenu was opened.\n                contentContext.onPointerGraceIntentChange(null);\n              }\n            })\n          )}\n          onKeyDown={composeEventHandlers(props.onKeyDown, (event) => {\n            const isTypingAhead = contentContext.searchRef.current !== '';\n            if (props.disabled || (isTypingAhead && event.key === ' ')) return;\n            if (SUB_OPEN_KEYS[rootContext.dir].includes(event.key)) {\n              context.onOpenChange(true);\n              // The trigger may hold focus if opened via pointer interaction\n              // so we ensure content is given focus again when switching to keyboard.\n              context.content?.focus();\n              // prevent window from scrolling\n              event.preventDefault();\n            }\n          })}\n        />\n      </MenuAnchor>\n    );\n  }\n);\n\nMenuSubTrigger.displayName = SUB_TRIGGER_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * MenuSubContent\n * -----------------------------------------------------------------------------------------------*/\n\nconst SUB_CONTENT_NAME = 'MenuSubContent';\n\ntype MenuSubContentElement = MenuContentImplElement;\ninterface MenuSubContentProps\n  extends Omit<\n    MenuContentImplProps,\n    keyof MenuContentImplPrivateProps | 'onCloseAutoFocus' | 'side' | 'align'\n  > {\n  /**\n   * Used to force mounting when more control is needed. Useful when\n   * controlling animation with React animation libraries.\n   */\n  forceMount?: true;\n}\n\nconst MenuSubContent = React.forwardRef<MenuSubContentElement, MenuSubContentProps>(\n  (props: ScopedProps<MenuSubContentProps>, forwardedRef) => {\n    const portalContext = usePortalContext(CONTENT_NAME, props.__scopeMenu);\n    const { forceMount = portalContext.forceMount, ...subContentProps } = props;\n    const context = useMenuContext(CONTENT_NAME, props.__scopeMenu);\n    const rootContext = useMenuRootContext(CONTENT_NAME, props.__scopeMenu);\n    const subContext = useMenuSubContext(SUB_CONTENT_NAME, props.__scopeMenu);\n    const ref = React.useRef<MenuSubContentElement>(null);\n    const composedRefs = useComposedRefs(forwardedRef, ref);\n    return (\n      <Collection.Provider scope={props.__scopeMenu}>\n        <Presence present={forceMount || context.open}>\n          <Collection.Slot scope={props.__scopeMenu}>\n            <MenuContentImpl\n              id={subContext.contentId}\n              aria-labelledby={subContext.triggerId}\n              {...subContentProps}\n              ref={composedRefs}\n              align=\"start\"\n              side={rootContext.dir === 'rtl' ? 'left' : 'right'}\n              disableOutsidePointerEvents={false}\n              disableOutsideScroll={false}\n              trapFocus={false}\n              onOpenAutoFocus={(event) => {\n                // when opening a submenu, focus content for keyboard users only\n                if (rootContext.isUsingKeyboardRef.current) ref.current?.focus();\n                event.preventDefault();\n              }}\n              // The menu might close because of focusing another menu item in the parent menu. We\n              // don't want it to refocus the trigger in that case so we handle trigger focus ourselves.\n              onCloseAutoFocus={(event) => event.preventDefault()}\n              onFocusOutside={composeEventHandlers(props.onFocusOutside, (event) => {\n                // We prevent closing when the trigger is focused to avoid triggering a re-open animation\n                // on pointer interaction.\n                if (event.target !== subContext.trigger) context.onOpenChange(false);\n              })}\n              onEscapeKeyDown={composeEventHandlers(props.onEscapeKeyDown, rootContext.onClose)}\n              onKeyDown={composeEventHandlers(props.onKeyDown, (event) => {\n                // Submenu key events bubble through portals. We only care about keys in this menu.\n                const isKeyDownInside = event.currentTarget.contains(event.target as HTMLElement);\n                const isCloseKey = SUB_CLOSE_KEYS[rootContext.dir].includes(event.key);\n                if (isKeyDownInside && isCloseKey) {\n                  context.onOpenChange(false);\n                  // We focus manually because we prevented it in `onCloseAutoFocus`\n                  subContext.trigger?.focus();\n                  // prevent window from scrolling\n                  event.preventDefault();\n                }\n              })}\n            />\n          </Collection.Slot>\n        </Presence>\n      </Collection.Provider>\n    );\n  }\n);\n\nMenuSubContent.displayName = SUB_CONTENT_NAME;\n\n/* -----------------------------------------------------------------------------------------------*/\n\nfunction getOpenState(open: boolean) {\n  return open ? 'open' : 'closed';\n}\n\nfunction getCheckedState(checked: boolean) {\n  return checked ? 'checked' : 'unchecked';\n}\n\nfunction focusFirst(candidates: HTMLElement[]) {\n  const PREVIOUSLY_FOCUSED_ELEMENT = document.activeElement;\n  for (const candidate of candidates) {\n    // if focus is already where we want to go, we don't want to keep going through the candidates\n    if (candidate === PREVIOUSLY_FOCUSED_ELEMENT) return;\n    candidate.focus();\n    if (document.activeElement !== PREVIOUSLY_FOCUSED_ELEMENT) return;\n  }\n}\n\n/**\n * Wraps an array around itself at a given start index\n * Example: `wrapArray(['a', 'b', 'c', 'd'], 2) === ['c', 'd', 'a', 'b']`\n */\nfunction wrapArray<T>(array: T[], startIndex: number) {\n  return array.map((_, index) => array[(startIndex + index) % array.length]);\n}\n\n/**\n * This is the \"meat\" of the typeahead matching logic. It takes in all the values,\n * the search and the current match, and returns the next match (or `undefined`).\n *\n * We normalize the search because if a user has repeatedly pressed a character,\n * we want the exact same behavior as if we only had that one character\n * (ie. cycle through options starting with that character)\n *\n * We also reorder the values by wrapping the array around the current match.\n * This is so we always look forward from the current match, and picking the first\n * match will always be the correct one.\n *\n * Finally, if the normalized search is exactly one character, we exclude the\n * current match from the values because otherwise it would be the first to match always\n * and focus would never move. This is as opposed to the regular case, where we\n * don't want focus to move if the current match still matches.\n */\nfunction getNextMatch(values: string[], search: string, currentMatch?: string) {\n  const isRepeated = search.length > 1 && Array.from(search).every((char) => char === search[0]);\n  const normalizedSearch = isRepeated ? search[0] : search;\n  const currentMatchIndex = currentMatch ? values.indexOf(currentMatch) : -1;\n  let wrappedValues = wrapArray(values, Math.max(currentMatchIndex, 0));\n  const excludeCurrentMatch = normalizedSearch.length === 1;\n  if (excludeCurrentMatch) wrappedValues = wrappedValues.filter((v) => v !== currentMatch);\n  const nextMatch = wrappedValues.find((value) =>\n    value.toLowerCase().startsWith(normalizedSearch.toLowerCase())\n  );\n  return nextMatch !== currentMatch ? nextMatch : undefined;\n}\n\ntype Point = { x: number; y: number };\ntype Polygon = Point[];\ntype Side = 'left' | 'right';\ntype GraceIntent = { area: Polygon; side: Side };\n\n// Determine if a point is inside of a polygon.\n// Based on https://github.com/substack/point-in-polygon\nfunction isPointInPolygon(point: Point, polygon: Polygon) {\n  const { x, y } = point;\n  let inside = false;\n  for (let i = 0, j = polygon.length - 1; i < polygon.length; j = i++) {\n    const xi = polygon[i].x;\n    const yi = polygon[i].y;\n    const xj = polygon[j].x;\n    const yj = polygon[j].y;\n\n    // prettier-ignore\n    const intersect = ((yi > y) !== (yj > y)) && (x < (xj - xi) * (y - yi) / (yj - yi) + xi);\n    if (intersect) inside = !inside;\n  }\n\n  return inside;\n}\n\nfunction isPointerInGraceArea(event: React.PointerEvent, area?: Polygon) {\n  if (!area) return false;\n  const cursorPos = { x: event.clientX, y: event.clientY };\n  return isPointInPolygon(cursorPos, area);\n}\n\nfunction whenMouse<E>(handler: React.PointerEventHandler<E>): React.PointerEventHandler<E> {\n  return (event) => (event.pointerType === 'mouse' ? handler(event) : undefined);\n}\n\nconst Root = Menu;\nconst Anchor = MenuAnchor;\nconst Portal = MenuPortal;\nconst Content = MenuContent;\nconst Group = MenuGroup;\nconst Label = MenuLabel;\nconst Item = MenuItem;\nconst CheckboxItem = MenuCheckboxItem;\nconst RadioGroup = MenuRadioGroup;\nconst RadioItem = MenuRadioItem;\nconst ItemIndicator = MenuItemIndicator;\nconst Separator = MenuSeparator;\nconst Arrow = MenuArrow;\nconst Sub = MenuSub;\nconst SubTrigger = MenuSubTrigger;\nconst SubContent = MenuSubContent;\n\nexport {\n  createMenuScope,\n  //\n  Menu,\n  MenuAnchor,\n  MenuPortal,\n  MenuContent,\n  MenuGroup,\n  MenuLabel,\n  MenuItem,\n  MenuCheckboxItem,\n  MenuRadioGroup,\n  MenuRadioItem,\n  MenuItemIndicator,\n  MenuSeparator,\n  MenuArrow,\n  MenuSub,\n  MenuSubTrigger,\n  MenuSubContent,\n  //\n  Root,\n  Anchor,\n  Portal,\n  Content,\n  Group,\n  Label,\n  Item,\n  CheckboxItem,\n  RadioGroup,\n  RadioItem,\n  ItemIndicator,\n  Separator,\n  Arrow,\n  Sub,\n  SubTrigger,\n  SubContent,\n};\nexport type {\n  MenuProps,\n  MenuAnchorProps,\n  MenuPortalProps,\n  MenuContentProps,\n  MenuGroupProps,\n  MenuLabelProps,\n  MenuItemProps,\n  MenuCheckboxItemProps,\n  MenuRadioGroupProps,\n  MenuRadioItemProps,\n  MenuItemIndicatorProps,\n  MenuSeparatorProps,\n  MenuArrowProps,\n  MenuSubProps,\n  MenuSubTriggerProps,\n  MenuSubContentProps,\n};\n"],"names":["createMenuScope","Menu","MenuAnchor","MenuPortal","MenuContent","MenuGroup","MenuLabel","MenuItem","MenuCheckboxItem","MenuRadioGroup","MenuRadioItem","MenuItemIndicator","MenuSeparator","MenuArrow","MenuSub","MenuSubTrigger","MenuSubContent","Root","Anchor","Portal","Content","Group","Label","Item","CheckboxItem","RadioGroup","RadioItem","ItemIndicator","Separator","Arrow","Sub","SubTrigger","SubContent","React","composeEventHandlers","createCollection","useComposedRefs","composeRefs","createContextScope","useDirection","DismissableLayer","useFocusGuards","FocusScope","useId","PopperPrimitive","createPopperScope","PortalPrimitive","Presence","Primitive","dispatchDiscreteCustomEvent","RovingFocusGroup","createRovingFocusGroupScope","Slot","useCallbackRef","hideOthers","RemoveScroll","SELECTION_KEYS","FIRST_KEYS","LAST_KEYS","FIRST_LAST_KEYS","SUB_OPEN_KEYS","ltr","rtl","SUB_CLOSE_KEYS","MENU_NAME","Collection","useCollection","createCollectionScope","createMenuContext","usePopperScope","useRovingFocusGroupScope","MenuProvider","useMenuContext","MenuRootProvider","useMenuRootContext","props","__scopeMenu","open","children","dir","onOpenChange","modal","popperScope","content","setContent","useState","isUsingKeyboardRef","useRef","handleOpenChange","direction","useEffect","handleKeyDown","current","document","addEventListener","handlePointer","capture","once","removeEventListener","useCallback","ANCHOR_NAME","forwardRef","forwardedRef","anchorProps","PORTAL_NAME","PortalProvider","usePortalContext","forceMount","undefined","container","context","CONTENT_NAME","MenuContentProvider","useMenuContentContext","portalContext","contentProps","rootContext","MenuRootContentModal","ref","composedRefs","onFocusOutside","event","preventDefault","checkForDefaultPrevented","MenuRootContentNonModal","MenuContentImpl","loop","trapFocus","onOpenAutoFocus","onCloseAutoFocus","disableOutsidePointerEvents","onEscapeKeyDown","onPointerDownOutside","onInteractOutside","onDismiss","disableOutsideScroll","rovingFocusGroupScope","getItems","currentItemId","setCurrentItemId","contentRef","onContentChange","timerRef","searchRef","pointerGraceTimerRef","pointerGraceIntentRef","pointerDirRef","lastPointerXRef","ScrollLockWrapper","Fragment","scrollLockWrapperProps","as","allowPinchZoom","handleTypeaheadSearch","key","search","items","filter","item","disabled","currentItem","activeElement","currentMatch","find","textValue","values","map","nextMatch","getNextMatch","newItem","updateSearch","value","window","clearTimeout","setTimeout","focus","isPointerMovingToSubmenu","isMovingTowards","side","isPointerInGraceArea","area","intent","getOpenState","outline","style","onKeyDown","target","isKeyDownInside","closest","currentTarget","isModifierKey","ctrlKey","altKey","metaKey","isCharacterKey","length","includes","candidateNodes","reverse","focusFirst","onBlur","contains","onPointerMove","whenMouse","pointerXHasChanged","clientX","newDir","GROUP_NAME","groupProps","LABEL_NAME","labelProps","ITEM_NAME","ITEM_SELECT","onSelect","itemProps","contentContext","isPointerDownRef","handleSelect","menuItem","itemSelectEvent","CustomEvent","bubbles","cancelable","defaultPrevented","onClose","onClick","onPointerDown","onPointerUp","click","isTypingAhead","MenuItemImpl","isFocused","setIsFocused","textContent","setTextContent","trim","onItemLeave","onItemEnter","onPointerLeave","onFocus","CHECKBOX_ITEM_NAME","checked","onCheckedChange","checkboxItemProps","getCheckedState","RADIO_GROUP_NAME","RadioGroupProvider","useRadioGroupContext","onValueChange","handleValueChange","RADIO_ITEM_NAME","radioItemProps","ITEM_INDICATOR_NAME","ItemIndicatorProvider","useItemIndicatorContext","itemIndicatorProps","indicatorContext","SEPARATOR_NAME","separatorProps","ARROW_NAME","arrowProps","SUB_NAME","MenuSubProvider","useMenuSubContext","parentMenuContext","trigger","setTrigger","SUB_TRIGGER_NAME","subContext","openTimerRef","onPointerGraceIntentChange","scope","clearOpenTimer","pointerGraceTimer","triggerId","contentId","onTriggerChange","contentRect","getBoundingClientRect","dataset","rightSide","bleed","contentNearEdge","contentFarEdge","x","y","clientY","top","bottom","onTriggerLeave","SUB_CONTENT_NAME","subContentProps","isCloseKey","candidates","PREVIOUSLY_FOCUSED_ELEMENT","candidate","wrapArray","array","startIndex","_","index","isRepeated","Array","from","every","char","normalizedSearch","currentMatchIndex","indexOf","wrappedValues","Math","max","excludeCurrentMatch","v","toLowerCase","startsWith","isPointInPolygon","point","polygon","inside","i","j","xi","yi","xj","yj","intersect","cursorPos","handler","pointerType"],"version":3,"file":"index.js.map"}