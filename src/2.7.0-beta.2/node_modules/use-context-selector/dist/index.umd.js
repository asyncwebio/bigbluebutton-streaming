!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports,require("react"),require("scheduler"),require("react-dom")):"function"==typeof define&&define.amd?define(["exports","react","scheduler","react-dom"],r):r((e||self).useContextSelector={},e.react,e.scheduler,e.reactDom)}(this,function(e,r,t,n){var o=Symbol(),u=Symbol(),c="undefined"==typeof window||/ServerSideRendering/.test(window.navigator&&window.navigator.userAgent)?r.useEffect:r.useLayoutEffect,i=t.unstable_runWithPriority?function(e){return t.unstable_runWithPriority(t.unstable_NormalPriority,e)}:function(e){return e()},s=function(e){return e};function f(e,t){var n=r.useContext(e)[o];if("object"==typeof process&&"production"!==process.env.NODE_ENV&&!n)throw new Error("useContextSelector requires special context");var u=n.v.current,i=n.n.current,s=n.l,f=t(u),a=r.useReducer(function(e,r){if(!r)return[u,f];if(r[0]<=i)return Object.is(e[1],f)?e:[u,f];try{if(2===r.length){if(Object.is(e[0],r[1]))return e;var n=t(r[1]);return Object.is(e[1],n)?e:[r[1],n]}}catch(e){}return[].concat(e)},[u,f]),d=a[0],l=a[1];return Object.is(d[1],f)||l(),c(function(){return s.add(l),function(){s.delete(l)}},[s]),d[1]}e.BridgeProvider=function(e){var t=e.value,n=e.children,o=e.context[u];if("object"==typeof process&&"production"!==process.env.NODE_ENV&&!o)throw new Error("BridgeProvider requires special context");return r.createElement(o,{value:t},n)},e.createContext=function(e){var t,s,f=r.createContext(((t={})[o]={v:{current:e},n:{current:-1},l:new Set,u:function(e){return e()}},t));return f[u]=f.Provider,f.Provider=(s=f.Provider,function(e){var t=e.value,u=e.children,f=r.useRef(t),a=r.useRef(0),d=r.useRef();if(!d.current){var l,p=new Set;d.current=((l={})[o]={v:f,n:a,l:p,u:function(e){n.unstable_batchedUpdates(function(){a.current+=1,p.forEach(function(e){return e([a.current])}),e()})}},l)}return c(function(){f.current=t,a.current+=1,i(function(){d.current[o].l.forEach(function(e){e([a.current,t])})})},[t]),r.createElement(s,{value:d.current},u)}),delete f.Consumer,f},e.useBridgeValue=function(e){var t=r.useContext(e);if("object"==typeof process&&"production"!==process.env.NODE_ENV&&!t[o])throw new Error("useBridgeValue requires special context");return t},e.useContext=function(e){return f(e,s)},e.useContextSelector=f,e.useContextUpdate=function(e){var t=r.useContext(e)[o];if("object"==typeof process&&"production"!==process.env.NODE_ENV&&!t)throw new Error("useContextUpdate requires special context");return t.u}});
//# sourceMappingURL=index.umd.js.map
