!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports,require("react"),require("scheduler"),require("react-native")):"function"==typeof define&&define.amd?define(["exports","react","scheduler","react-native"],r):r((e||self).useContextSelector={},e.react,e.scheduler,e.reactNative)}(this,function(e,r,t,n){var u=Symbol(),o=Symbol(),c="undefined"==typeof window||/ServerSideRendering/.test(window.navigator&&window.navigator.userAgent)?r.useEffect:r.useLayoutEffect,i=t.unstable_runWithPriority?function(e){return t.unstable_runWithPriority(t.unstable_NormalPriority,e)}:function(e){return e()},s=function(e){return e};function f(e,t){var n=r.useContext(e)[u];if("object"==typeof process&&"production"!==process.env.NODE_ENV&&!n)throw new Error("useContextSelector requires special context");var o=n.v.current,i=n.n.current,s=n.l,f=t(o),a=r.useReducer(function(e,r){if(!r)return[o,f];if(r[0]<=i)return Object.is(e[1],f)?e:[o,f];try{if(2===r.length){if(Object.is(e[0],r[1]))return e;var n=t(r[1]);return Object.is(e[1],n)?e:[r[1],n]}}catch(e){}return[].concat(e)},[o,f]),d=a[0],l=a[1];return Object.is(d[1],f)||l(),c(function(){return s.add(l),function(){s.delete(l)}},[s]),d[1]}e.BridgeProvider=function(e){var t=e.value,n=e.children,u=e.context[o];if("object"==typeof process&&"production"!==process.env.NODE_ENV&&!u)throw new Error("BridgeProvider requires special context");return r.createElement(u,{value:t},n)},e.createContext=function(e){var t,s,f=r.createContext(((t={})[u]={v:{current:e},n:{current:-1},l:new Set,u:function(e){return e()}},t));return f[o]=f.Provider,f.Provider=(s=f.Provider,function(e){var t=e.value,o=e.children,f=r.useRef(t),a=r.useRef(0),d=r.useRef();if(!d.current){var l,v=new Set;d.current=((l={})[u]={v:f,n:a,l:v,u:function(e){n.unstable_batchedUpdates(function(){a.current+=1,v.forEach(function(e){return e([a.current])}),e()})}},l)}return c(function(){f.current=t,a.current+=1,i(function(){d.current[u].l.forEach(function(e){e([a.current,t])})})},[t]),r.createElement(s,{value:d.current},o)}),delete f.Consumer,f},e.useBridgeValue=function(e){var t=r.useContext(e);if("object"==typeof process&&"production"!==process.env.NODE_ENV&&!t[u])throw new Error("useBridgeValue requires special context");return t},e.useContext=function(e){return f(e,s)},e.useContextSelector=f,e.useContextUpdate=function(e){var t=r.useContext(e)[u];if("object"==typeof process&&"production"!==process.env.NODE_ENV&&!t)throw new Error("useContextUpdate requires special context");return t.u}});
//# sourceMappingURL=index.native.umd.js.map
